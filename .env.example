# =============================================================================
# Sardis Environment Configuration
# =============================================================================
# Copy this file to .env and fill in values for your environment.
# NEVER commit .env to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
# Canonical options: dev, sandbox, prod
SARDIS_ENVIRONMENT=dev
# Legacy aliases still read in some modules
# ENVIRONMENT=development
# SARDIS_ENV=development

# -----------------------------------------------------------------------------
# Logging and Runtime Flags
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
# DEBUG=false

# -----------------------------------------------------------------------------
# Database (Required for production)
# -----------------------------------------------------------------------------
# PostgreSQL connection string (Neon, Supabase, or self-hosted)
# Example: postgresql://user:password@host/sardis?sslmode=require
DATABASE_URL=postgresql://localhost:5432/sardis
# Legacy config alias (uses DATABASE_URL if not set)
# SARDIS_DATABASE_URL=postgresql://localhost:5432/sardis
# DB_POOL_MIN=5
# DB_POOL_MAX=20

# -----------------------------------------------------------------------------
# Security (Required for production)
# -----------------------------------------------------------------------------
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SARDIS_SECRET_KEY=change-me-generate-with-python-secrets-token-urlsafe-32
# Legacy alias used by some routers
# SECRET_KEY=change-me-generate-with-python-secrets-token-urlsafe-32

# JWT signing secret for dashboard/admin sessions (HS256)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=
# JWT_EXPIRATION_HOURS=24

# Admin password (change in production!)
SARDIS_ADMIN_PASSWORD=
# Dev-only toggles (do not enable in production)
# SARDIS_ALLOW_INSECURE_DEFAULT_ADMIN_PASSWORD=false
# SARDIS_ALLOW_BOOTSTRAP_API_KEYS=false

# -----------------------------------------------------------------------------
# CORS and Network Controls
# -----------------------------------------------------------------------------
# Comma-separated origins. In prod, use explicit HTTPS origins only.
SARDIS_ALLOWED_ORIGINS=http://localhost:3005,http://localhost:5173
# Legacy alias used by config_validation helpers
# CORS_ORIGINS=http://localhost:3005,http://localhost:5173
# Trusted proxy IPs / ranges for rate-limiter source IP extraction
SARDIS_TRUSTED_PROXIES=127.0.0.1,::1

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------
SARDIS_API_HOST=0.0.0.0
SARDIS_API_PORT=8000
SARDIS_API_BASE_URL=http://localhost:8000
# Legacy aliases used by config_validation helpers
# API_HOST=0.0.0.0
# API_PORT=8000
# RATE_LIMIT=100

# -----------------------------------------------------------------------------
# TAP Request Verification
# -----------------------------------------------------------------------------
# Values: disabled, enabled
# SARDIS_TAP_ENFORCEMENT=disabled
# SARDIS_TAP_JWKS_URL=
# SARDIS_TAP_MAX_TIME_WINDOW=300
# SARDIS_TAP_NONCE_TTL=600

# -----------------------------------------------------------------------------
# Chain Configuration
# -----------------------------------------------------------------------------
# Options: simulated, live
SARDIS_CHAIN_MODE=simulated
# Execution mode override: simulated | staging_live | production_live
# If unset, mode is inferred from SARDIS_CHAIN_MODE + SARDIS_ENVIRONMENT.
# SARDIS_EXECUTION_MODE=simulated
# Canonical runtime chain defaults
SARDIS_BASE_RPC_URL=https://sepolia.base.org
SARDIS_POLYGON_RPC_URL=https://rpc-amoy.polygon.technology
SARDIS_ETHEREUM_RPC_URL=https://rpc.sepolia.org
# Legacy aliases used by config_validation helpers
# DEFAULT_CHAIN=base
# RPC_URL_BASE=https://sepolia.base.org
# RPC_URL_POLYGON=https://rpc-amoy.polygon.technology
# RPC_URL_ETHEREUM=https://rpc.sepolia.org
# RPC_URL_ARBITRUM=
# RPC_URL_OPTIMISM=
# RPC_URL_SOLANA=

# -----------------------------------------------------------------------------
# MPC Provider (Required for live chain mode)
# -----------------------------------------------------------------------------
# Options: turnkey, fireblocks, local, simulated
# - turnkey/fireblocks: non-custodial MPC signing path
# - local: custodial signer for dev/sandbox only (requires SARDIS_EOA_PRIVATE_KEY)
# - simulated: dry-run mode, no on-chain signing
SARDIS_MPC__NAME=simulated
SARDIS_MPC__API_BASE=https://api.turnkey.com
SARDIS_MPC__CREDENTIAL_ID=

# Turnkey MPC Configuration (required if MPC__NAME=turnkey)
TURNKEY_API_PUBLIC_KEY=
TURNKEY_API_PRIVATE_KEY=
TURNKEY_ORGANIZATION_ID=
# Compatibility aliases
# TURNKEY_API_KEY=
# TURNKEY_BASE_URL=https://api.turnkey.com

# Fireblocks Configuration (required if MPC__NAME=fireblocks)
# FIREBLOCKS_API_KEY=
# FIREBLOCKS_API_SECRET_PATH=
# FIREBLOCKS_VAULT_ID=

# -----------------------------------------------------------------------------
# Redis / Cache / Rate Limiting (Required for production)
# -----------------------------------------------------------------------------
# Prefer SARDIS_REDIS_URL; REDIS_URL / UPSTASH_REDIS_URL are accepted fallbacks.
SARDIS_REDIS_URL=
# REDIS_URL=redis://localhost:6379
# UPSTASH_REDIS_URL=rediss://default:xxx@xxx.upstash.io:6379

# -----------------------------------------------------------------------------
# Core Feature Flags and Dev Defaults
# -----------------------------------------------------------------------------
# SARDIS_ENABLE_SCHEDULER=false
# SARDIS_ENABLE_CARDS=false
# SARDIS_ALLOW_ANON=false
# SARDIS_PUBLIC_METRICS=false
# SARDIS_STRICT_CONFIG=false
# SARDIS_DISABLE_MONOREPO_BOOTSTRAP=false
# SARDIS_DEFAULT_ORG_ID=org_demo
# SARDIS_TEST_API_KEY=
# SARDIS_EOA_PRIVATE_KEY=
# SARDIS_AUTO_FREEZE_ON_POLICY_DENY=true

# Staging live pilot lane (used when execution mode resolves to staging_live)
# Comma-separated org IDs allowed to execute live transactions in staging
# SARDIS_PILOT_ALLOWLIST_ORGS=org_demo,org_partner_a
# Optional merchant/domain allowlist for pilot lane
# SARDIS_PILOT_ALLOWLIST_MERCHANTS=amazon.com,openai.com
# Optional per-operation max amount (major units, e.g. 100.00 USD)
# SARDIS_PILOT_MAX_AMOUNT=100.00

# Health endpoint chain override for RPC/contracts checks
# SARDIS_HEALTH_CHAIN=base_sepolia
# Default chain selection for API/SDK calls
# SARDIS_DEFAULT_CHAIN=base_sepolia

# -----------------------------------------------------------------------------
# Payments and Compliance Integrations (Optional, recommended in prod)
# -----------------------------------------------------------------------------
# Stripe checkout
# STRIPE_SECRET_KEY=
# STRIPE_WEBHOOK_SECRET=

# Persona KYC
# PERSONA_API_KEY=
# PERSONA_TEMPLATE_ID=
# PERSONA_WEBHOOK_SECRET=

# Elliptic sanctions screening
# ELLIPTIC_API_KEY=
# ELLIPTIC_API_SECRET=
# ELLIPTIC_RISK_THRESHOLD=0.7

# Virtual cards (Lithic)
# LITHIC_API_KEY=
# LITHIC_WEBHOOK_SECRET=
# LITHIC_FUNDING_ACCOUNT_ID=

# Treasury controls (USD minor units; defaults shown)
# SARDIS_TREASURY_DEFAULT_ROUTE=fiat_first
# SARDIS_TREASURY_MAX_PER_PAYMENT_MINOR=250000000
# SARDIS_TREASURY_MAX_DAILY_ORG_MINOR=1000000000
# SARDIS_TREASURY_MAX_PAYMENTS_PER_HOUR=300
# SARDIS_TREASURY_RECON_TOLERANCE_MINOR=1000
# SARDIS_TREASURY_RETRY_BATCH_SIZE=20

# Fiat ramps
# ONRAMPER_API_KEY=
# ONRAMPER_WEBHOOK_SECRET=
# BRIDGE_API_KEY=
# BRIDGE_API_SECRET=

# -----------------------------------------------------------------------------
# AI, Analytics, and Generic Webhooks (Optional)
# -----------------------------------------------------------------------------
# OPENAI_API_KEY=
# GROQ_API_KEY=
# POSTHOG_API_KEY=
# ANALYTICS_BACKEND=memory
# WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# Security Header Middleware Tuning (Optional)
# -----------------------------------------------------------------------------
# SECURITY_HSTS_MAX_AGE=31536000
# SECURITY_HSTS_SUBDOMAINS=true
# SECURITY_HSTS_PRELOAD=false
# SECURITY_MAX_BODY_SIZE=10485760
# SECURITY_CSP_REPORT_URI=

# -----------------------------------------------------------------------------
# Monitoring (Optional)
# -----------------------------------------------------------------------------
# DATADOG_API_KEY=
# SENTRY_DSN=
# SENTRY_ENVIRONMENT=development
# SENTRY_RELEASE=
# GIT_COMMIT=

# -----------------------------------------------------------------------------
# Smart Contract Addresses (Optional - live mode)
# -----------------------------------------------------------------------------
# SARDIS_WALLET_FACTORY_BASE=0x...
# SARDIS_WALLET_FACTORY_POLYGON=0x...
# SARDIS_ESCROW_BASE=0x...
# SARDIS_ESCROW_POLYGON=0x...

# ---- Additional runtime env vars (auto-synced) ----
BRIDGE_CARDS_BASE_URL=
BRIDGE_CARDS_METHOD_MAP_JSON=
BRIDGE_CARDS_PATH_MAP_JSON=
BRIDGE_CARDS_WEBHOOK_SECRET=
BRIDGE_PROGRAM_ID=
BRIDGE_WEBHOOK_SECRET=
COINBASE_CDP_API_KEY_NAME=
COINBASE_CDP_API_KEY_PRIVATE_KEY=
COINBASE_CDP_NETWORK_ID=
DISCORD_WEBHOOK_URL=
LITHIC_ASA_WEBHOOK_SECRET=
RAIN_API_KEY=
RAIN_BASE_URL=
RAIN_CARDS_METHOD_MAP_JSON=
RAIN_CARDS_PATH_MAP_JSON=
RAIN_PROGRAM_ID=
RAIN_WEBHOOK_SECRET=
SARDIS_A2A_ALLOW_CROSS_ORG=
SARDIS_A2A_ALLOW_UNSIGNED_DEV=
SARDIS_A2A_ENFORCE_TRUST_TABLE=
SARDIS_A2A_REQUIRE_SIGNATURE=
SARDIS_A2A_SIGNATURE_DOMAIN=
SARDIS_A2A_TRUST_RELATIONS=
SARDIS_AI_ADVISORY_ONLY=
SARDIS_ALLOW_PUBLIC_SIGNUP=
SARDIS_API_KEY=
SARDIS_CANONICAL_DRIFT_TOLERANCE_MINOR=
SARDIS_CANONICAL_STALE_PROCESSING_MINUTES=
SARDIS_CARDS_ON_CHAIN_PROVIDER=
SARDIS_CARDS_ORG_PROVIDER_OVERRIDES_JSON=
SARDIS_CHECKOUT_ALLOW_EXECUTOR_TRACING=
SARDIS_CHECKOUT_ALLOW_INMEMORY_STORE=
SARDIS_CHECKOUT_ALLOW_INMEMORY_SECRET_STORE=
SARDIS_CHECKOUT_APPROVAL_THRESHOLD_USD=
SARDIS_CHECKOUT_AUTO_FREEZE_ON_SECURITY_INCIDENT=
SARDIS_CHECKOUT_AUTO_ROTATE_ON_SECURITY_INCIDENT=
SARDIS_CHECKOUT_AUTO_ROTATE_SEVERITIES=
SARDIS_CHECKOUT_AUTO_UNFREEZE_ALLOWED_SEVERITIES=
SARDIS_CHECKOUT_AUTO_UNFREEZE_ON_SECURITY_INCIDENT=
SARDIS_CHECKOUT_AUTO_UNFREEZE_OPS_APPROVED=
SARDIS_CHECKOUT_DISPATCH_REQUIRED=
SARDIS_CHECKOUT_DISPATCH_SECURITY_ALERTS=
SARDIS_CHECKOUT_DISPATCH_TIMEOUT_SECONDS=
SARDIS_CHECKOUT_ENFORCE_EXECUTOR_ATTESTATION=
SARDIS_CHECKOUT_EXECUTOR_ATTESTATION_KEY=
SARDIS_CHECKOUT_EXECUTOR_ATTESTATION_TTL_SECONDS=
SARDIS_CHECKOUT_EXECUTOR_DISPATCH_SIGNING_KEY=
SARDIS_CHECKOUT_EXECUTOR_DISPATCH_TOKEN=
SARDIS_CHECKOUT_EXECUTOR_DISPATCH_URL=
SARDIS_CHECKOUT_EXECUTOR_TOKEN=
SARDIS_CHECKOUT_INCIDENT_COOLDOWN_CRITICAL_SECONDS=
SARDIS_CHECKOUT_INCIDENT_COOLDOWN_HIGH_SECONDS=
SARDIS_CHECKOUT_INCIDENT_COOLDOWN_LOW_SECONDS=
SARDIS_CHECKOUT_INCIDENT_COOLDOWN_MEDIUM_SECONDS=
SARDIS_CHECKOUT_PAN_EXECUTION_ENABLED=
SARDIS_CHECKOUT_PCI_ATTESTATION_ACK=
SARDIS_CHECKOUT_QSA_CONTACT=
SARDIS_CHECKOUT_REQUIRE_APPROVAL_FOR_PAN=
SARDIS_CHECKOUT_REQUIRE_TOKENIZED_IN_PROD=
SARDIS_CHECKOUT_SECRET_TTL_SECONDS=
SARDIS_ENABLE_SANDBOX=
SARDIS_ENABLE_SECURE_CHECKOUT_EXECUTOR=
SARDIS_EVIDENCE_CURSOR_SECRET=
SARDIS_EVIDENCE_SIGNING_KEY_ID=
SARDIS_EVIDENCE_SIGNING_SECRET=
SARDIS_EXECUTOR_DISPATCH_SIGNATURE_TTL_SECONDS=
SARDIS_EXECUTOR_ENFORCE_SIGNED_DISPATCH=
SARDIS_GOAL_DRIFT_BLOCK_THRESHOLD=
SARDIS_GOAL_DRIFT_REVIEW_THRESHOLD=
SARDIS_KYA_AUTO_REGISTER_ON_AGENT_CREATE=
SARDIS_KYA_ENFORCEMENT_ENABLED=
SARDIS_KYA_LIVENESS_TIMEOUT_SECONDS=
SARDIS_KYA_STRICT_REGISTRATION=
SARDIS_KYT_REVIEW_LEVELS=
SARDIS_KYT_REVIEW_LEVELS_BY_ORG_JSON=
SARDIS_PROMPT_INJECTION_GUARD_ENABLED=
SLACK_WEBHOOK_URL=
SMTP_FROM_EMAIL=
SMTP_HOST=
SMTP_PASSWORD=
SMTP_PORT=
SMTP_TO_EMAILS=
SMTP_USER=
SMTP_USE_TLS=
STRIPE_API_KEY=
STRIPE_CONNECTED_ACCOUNT_ID=
STRIPE_CONNECTED_ACCOUNT_MAP_JSON=
STRIPE_TREASURY_FINANCIAL_ACCOUNT_ID=
