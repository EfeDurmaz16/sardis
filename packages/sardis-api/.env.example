# =============================================================================
# Sardis API - Environment Configuration
# =============================================================================
#
# Copy this file to .env and fill in your values.
# Never commit .env files with real secrets to version control.
#
# =============================================================================

# -----------------------------------------------------------------------------
# Core Configuration
# -----------------------------------------------------------------------------

# Environment: development | staging | production
SARDIS_ENVIRONMENT=development

# Log level: DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=INFO

# Chain execution mode: simulated | live
# Use 'simulated' for testing without real blockchain transactions
SARDIS_CHAIN_MODE=simulated
# Optional explicit execution mode: simulated | staging_live | production_live
# If unset, mode is inferred from SARDIS_CHAIN_MODE + SARDIS_ENVIRONMENT
# SARDIS_EXECUTION_MODE=simulated

# Admin password for dashboard authentication
# Change this in production!
SARDIS_ADMIN_PASSWORD=change_me_in_production

# JWT secret key for token signing
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
# REQUIRED for production - if not set, a random key is generated at startup
JWT_SECRET_KEY=

# JWT token expiration in hours (default: 24)
JWT_EXPIRATION_HOURS=24

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------

# PostgreSQL connection URL
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://sardis:sardis@localhost:5432/sardis

# -----------------------------------------------------------------------------
# Cache Configuration
# -----------------------------------------------------------------------------

# Redis URL for caching and rate limiting
# Leave empty to use in-memory cache (not recommended for production)
SARDIS_REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Blockchain Configuration
# -----------------------------------------------------------------------------

# RPC endpoints for blockchain networks
# These are public endpoints - for production, use dedicated nodes

# Base Sepolia (testnet)
SARDIS_RPC_BASE_SEPOLIA=https://sepolia.base.org

# Base Mainnet
SARDIS_RPC_BASE=https://mainnet.base.org

# Ethereum Mainnet
SARDIS_RPC_ETHEREUM=https://eth.llamarpc.com

# Polygon Mainnet
SARDIS_RPC_POLYGON=https://polygon-rpc.com

# EOA (Externally Owned Account) for simulated mode
# Only needed for local testing with simulated transactions
SARDIS_EOA_PRIVATE_KEY=
SARDIS_EOA_ADDRESS=

# -----------------------------------------------------------------------------
# MPC Provider - Turnkey
# -----------------------------------------------------------------------------

# Turnkey API credentials for MPC wallet signing
# Get these from https://dashboard.turnkey.com
TURNKEY_API_PUBLIC_KEY=
TURNKEY_API_PRIVATE_KEY=
TURNKEY_API_KEY=
TURNKEY_ORGANIZATION_ID=

# -----------------------------------------------------------------------------
# Payment Providers
# -----------------------------------------------------------------------------

# Stripe API key for card payments and fiat on/off-ramp
# Get this from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=

# Lithic API key for virtual card issuance
# Get this from https://dashboard.lithic.com
LITHIC_API_KEY=
LITHIC_ENVIRONMENT=sandbox

# -----------------------------------------------------------------------------
# SDK Configuration (for client applications)
# -----------------------------------------------------------------------------

# Default Sardis API key (for SDK/CLI usage)
SARDIS_API_KEY=

# API base URL
SARDIS_API_BASE_URL=http://localhost:8000

# Default chain for transactions
SARDIS_DEFAULT_CHAIN=base_sepolia

# Health endpoint chain override used by /health RPC/contracts checks
# SARDIS_HEALTH_CHAIN=base_sepolia

# Default wallet ID for SDK operations
SARDIS_WALLET_ID=

# Default agent ID for attribution
SARDIS_AGENT_ID=

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------

# Port to run the API server on
PORT=8000

# Number of Gunicorn workers (production only)
# Recommended: (2 * CPU cores) + 1
GUNICORN_WORKERS=4

# CORS allowed origins (comma-separated)
# Example: https://app.sardis.network,https://dashboard.sardis.network
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# -----------------------------------------------------------------------------
# Monitoring & Logging
# -----------------------------------------------------------------------------

# Sentry DSN for error tracking
SENTRY_DSN=

# Datadog API key for metrics
DD_API_KEY=

# Alert routing (JSON object strings)
# Example: {"info":["websocket"],"warning":["websocket","slack"],"critical":["websocket","pagerduty","slack","email"]}
SARDIS_ALERT_SEVERITY_CHANNELS_JSON=
# Example: {"slack":180,"email":300,"pagerduty":120}
SARDIS_ALERT_CHANNEL_COOLDOWNS_JSON=

# Optional channel credentials
SLACK_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=
SMTP_TO_EMAILS=
PAGERDUTY_ROUTING_KEY=
PAGERDUTY_SOURCE=sardis.api

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------

# Enable A2A marketplace
SARDIS_ENABLE_MARKETPLACE=true

# Enable virtual cards
SARDIS_ENABLE_CARDS=false

# Enable fiat checkout
SARDIS_ENABLE_CHECKOUT=false

# -----------------------------------------------------------------------------
# Staging Live Pilot Lane
# -----------------------------------------------------------------------------
# Required in staging_live mode. Comma-separated org IDs allowed to execute.
# SARDIS_PILOT_ALLOWLIST_ORGS=org_demo,org_partner_a
# Optional merchant/domain allowlist (exact domain or parent domain)
# SARDIS_PILOT_ALLOWLIST_MERCHANTS=amazon.com,openai.com
# Optional max amount in major units (e.g. 100.00)
# SARDIS_PILOT_MAX_AMOUNT=100.00
